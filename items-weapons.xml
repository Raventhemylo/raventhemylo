<?xml version="1.0" encoding="utf-8" ?>
<elements>
	<info>
		<name>Weapons</name>
		<update version="0.0.5">
			<file name="items-weapons.xml" url="https://raw.githubusercontent.com/Raventhemylo/raventhemylo/main/items-weapons.xml" />
		</update>
	</info>

	<!-- simple -->

	<!-- martial -->
	<element name="Stormcaller Hammer" type="Weapon" source="Raventhemylo" id="ID_RTM_CW_WEAPON_STORMCALLER_HAMMER">
		<supports>ID_INTERNAL_WEAPON_CATEGORY_MARTIAL_MELEE, ID_INTERNAL_DAMAGE_TYPE_BLUDGEONING, ID_INTERNAL_WEAPON_PROPERTY_HEAVY, ID_INTERNAL_WEAPON_GROUP_HAMMERS, ID_RAVENTHEMYLO_WEAPON_PROPERTY_STORMCALLER_DISCHARGE</supports>
		<description>
			<p>Stormcaller stores the excess kinetic energy of its weilder as charges and can hold a max of 6. Charges are gained by landing a critical hit or by rolling the maximum value on a damage die. </p>
			<ul>
				<li>You can expend one charge to transform Stormcaller into cannon form.</li>
				<li>As part of an attack you can expend a charge to add 1d8 lighting damage.</li>
				<li>You can expend two charges instead to cause everything within 5 ft. of the target to make a Dexterity saving throw (DC equal to 8 + your proficiency bonus + your Dexterity modifier) or suffer 1d8 lightning damage, taking half on a sucessful save.</li>
				<li>On a miss, the energy fails to detonate or bounces away harmlessly before doing so.</li>
			</ul>
		</description>
		<setters>
			<set name="category">Weapons</set>
			<set name="cost" currency="gp">250</set>
			<set name="weight" lb="7.5">7.5 lb.</set>
			<set name="slot">twohand</set>
			<set name="damage" type="bludgeoning">1d8</set>
			<set name="proficiency">ID_RAVENTHEMYLO_PROFICIENCY_WEAPON_PROFICIENCY_STORMCALLER</set>
		</setters>
	</element>

	<element name="Stormcaller Hammer v2" type="Weapon" source="Raventhemylo" id="ID_RTM_CW_WEAPON_STORMCALLER_HAMMER_2">
		<supports>ID_INTERNAL_WEAPON_CATEGORY_MARTIAL_MELEE, ID_INTERNAL_DAMAGE_TYPE_BLUDGEONING, ID_INTERNAL_WEAPON_PROPERTY_HEAVY, ID_INTERNAL_WEAPON_GROUP_HAMMERS, ID_RAVENTHEMYLO_WEAPON_PROPERTY_STORMCALLER_DISCHARGE_V2</supports>
		<description>
			<p>Stormcaller stores the excess kinetic energy of its weilder as charges and can hold a max of 6. Charges are gained by landing a critical hit or by rolling the maximum value on a damage die. </p>
			<ul>
				<li>You can expend one charge to transform Stormcaller into cannon form.</li>
				<li>As part of an attack you can expend a charge to add 1d8 lighting damage.</li>
				<li>You can expend two charges instead to cause everything within 5 ft. of the target to make a Dexterity saving throw (DC equal to 8 + your proficiency bonus + your Dexterity modifier) or suffer 1d8 lightning damage, taking half on a sucessful save.</li>
				<li>You can expend 4 charges to shoot a net of lighting at a target within 30 ft. On a hit, the target takes an additional 1d8 lightning damage and makes dexterity saving throw with the DC calculated prior. On a failure, they are grappled for one round.</li>
				<li>On a miss, the energy fails to detonate or bounces away harmlessly before doing so.</li>
			</ul>
		</description>
		<setters>
			<set name="category">Weapons</set>
			<set name="cost" currency="gp">1000</set>
			<set name="weight" lb="7.5">7.5 lb.</set>
			<set name="slot">twohand</set>
			<set name="damage" type="bludgeoning">1d8</set>
			<set name="proficiency">ID_RAVENTHEMYLO_PROFICIENCY_WEAPON_PROFICIENCY_STORMCALLER</set>
		</setters>
	</element>

	<element name="Stormcaller Cannon" type="Weapon" source="Raventhemylo" id="ID_RTM_CW_WEAPON_STORMCALLER_CANNON">
		<supports>ID_INTERNAL_WEAPON_CATEGORY_MARTIAL_RANGED, ID_INTERNAL_DAMAGE_TYPE_PIERCING, ID_INTERNAL_WEAPON_PROPERTY_HEAVY, ID_INTERNAL_WEAPON_GROUP_BOWS, ID_RAVENTHEMYLO_WEAPON_PROPERTY_STORMCALLER_DISCHARGE</supports>
		<description>
			<p>Stormcaller stores the excess kinetic energy of its weilder as charges and can hold a max of 6. Charges are gained by landing a critical hit or by rolling the maximum value on a damage die. </p>
			<ul>
				<li>As part of an attack you can expend a charge to add 1d8 lighting damage.</li>
				<li>You can expend two charges instead to cause everything within 5 ft. of the target to make a Dexterity saving throw (DC equal to 8 + your proficiency bonus + your Dexterity modifier) or suffer 1d8 lightning damage, taking half on a sucessful save.</li>
				<li>On a miss, the energy fails to detonate or bounces away harmlessly before doing so.</li>
			</ul>
		</description>
		<setters>
			<set name="category">Weapons</set>
			<set name="cost" currency="gp">250</set>
			<set name="weight" lb="7.5"> 7.5 lb.</set>
			<set name="slot">twohand</set>
			<set name="range">30/200/800</set>
			<set name="damage" type="piercing">1d10</set>
			<set name="proficiency">ID_RAVENTHEMYLO_PROFICIENCY_WEAPON_PROFICIENCY_STORMCALLER</set>
		</setters>
	</element>

	<element name="Stormcaller Cannon v2" type="Weapon" source="Raventhemylo" id="ID_RTM_CW_WEAPON_STORMCALLER_CANNON_2">
		<supports>ID_INTERNAL_WEAPON_CATEGORY_MARTIAL_MELEE, ID_INTERNAL_DAMAGE_TYPE_BLUDGEONING, ID_INTERNAL_WEAPON_PROPERTY_HEAVY, ID_INTERNAL_WEAPON_GROUP_HAMMERS, ID_RAVENTHEMYLO_WEAPON_PROPERTY_STORMCALLER_DISCHARGE_V2</supports>
		<description>
			<p>Stormcaller stores the excess kinetic energy of its weilder as charges and can hold a max of 6. Charges are gained by landing a critical hit or by rolling the maximum value on a damage die. </p>
			<ul>
				<li>You can expend one charge to transform Stormcaller into cannon form.</li>
				<li>As part of an attack you can expend a charge to add 1d8 lighting damage.</li>
				<li>You can expend two charges instead to cause everything within 5 ft. of the target to make a Dexterity saving throw (DC equal to 8 + your proficiency bonus + your Dexterity modifier) or suffer 1d8 lightning damage, taking half on a sucessful save.</li>
				<li>You can expend 4 charges to shoot a net of lighting at a target within 30 ft. On a hit, the target takes an additional 1d8 lightning damage and makes dexterity saving throw with the DC calculated prior. On a failure, they are grappled for one round.</li>
				<li>On a miss, the energy fails to detonate or bounces away harmlessly before doing so.</li>
			</ul>
		</description>
		<setters>
			<set name="category">Weapons</set>
			<set name="cost" currency="gp">1000</set>
			<set name="weight" lb="7.5">7.5 lb.</set>
			<set name="slot">twohand</set>
			<set name="damage" type="bludgeoning">1d8</set>
			<set name="proficiency">ID_RAVENTHEMYLO_PROFICIENCY_WEAPON_PROFICIENCY_STORMCALLER</set>
		</setters>
	</element>
	
	<element name="Weapon Proficiency (Stormcaller)" type="Proficiency"  source="Raventhemylo" id="ID_RAVENTHEMYLO_PROFICIENCY_WEAPON_PROFICIENCY_STORMCALLER">
		<supports>Weapon, Martial, Melee, ID_INTERNAL_WEAPON_CATEGORY_MARTIAL_MELEE, ID_INTERNAL_WEAPON_CATEGORY_MARTIAL_RANGED, ID_INTERNAL_WEAPON_PROPERTY_HEAVY</supports>
	</element>

	<element name="Discharge" type="Weapon Property" source="Raventhemylo" id="ID_RAVENTHEMYLO_WEAPON_PROPERTY_STORMCALLER_DISCHARGE">
		<description>
			<p> Stormcaller stores the excess kinetic energy of its weilder as charges and can hold a max of 6. You can expend a charge to transform Stormcaller into cannon form, making a ranged attack with it. As part of an attack you can expend a charge to add 1d8 lighting damage. You can expend two charges instead to cause everything within 5 ft. of the target to make a Dexterity saving throw (DC equal to 8 + your proficiency bonus + your Dexterity modifier) or suffer 1d8 lightning damage, taking half on a sucessful save. Charges are gained by landing a critical hit or by rolling the maximum value on a damage die. On a miss, the energy fails to detonate or bounces away harmlessly before doing so.   </p>
		</description>		
	</element>

	<element name="Discharge" type="Weapon Property" source="Raventhemylo" id="ID_RAVENTHEMYLO_PROFICIENCY_STORMCALLER_DISCHARGE_V2">
		<description>
			<p> Stormcaller stores the excess kinetic energy of its weilder as charges and can hold a max of 8. You can expend a charge to transform Stormcaller into cannon form, making a ranged attack with it. As part of an attack you can expend a charge to add 1d8 lighting damage. You can expend two charges instead to cause everything within 5 ft. of the target to make a Dexterity saving throw (DC equal to 8 + your proficiency bonus + your Dexterity modifier) or suffer 1d8 lightning damage, taking half on a sucessful save. You can expend 4 charges to shoot a net of lighting at a target within 30 ft. On a hit, the target takes an additional 1d8 lightning damage and makes dexterity saving throw with the DC calculated prior. Charges are gained by landing a critical hit or by rolling the maximum value on a damage die. On a miss, the energy fails to detonate or bounces away harmlessly before doing so. </p>
		</description>
	</element>
	
	<!-- Properties -->
	<element name="Misfire" type="Weapon Property" source="Raventhemylo" id="ID_RAVENTHEMYLO_WEAPON_PROPERTY_MISFIRE">
		<description>
			<p>Whenever you make an attack roll with a firearm, and the dice roll is equal to or lower than the weapon's Misfire score, the weapon misfires. The attack misses, and the weapon cannot be used again until you spend an action to try and repair it. To repair your firearm, you must make a successful Tinker's Tools check (DC equal to 8 + misfire score). If your check fails, the weapon is broken and must be repaired out of combat at half the cost of the firearm.</p>
		</description> 
	</element>

	<element name="Reload" type="Weapon Property" source="Raventhemylo" id="ID_RAVENTHEMYLO_WEAPON_PROPERTY_RELOAD">
		<description>
			<p>The weapon can be fired a number of times equal to its Reload score before you must spend 1 attack or 1 action to reload. You must have one free hand to reload a firearm.</p>
		</description>
	</element>

	<!-- temporary custom property elements -->
	<element name="Misfire 1" type="Weapon Property" source="Raventhemylo" id="ID_RAVENTHEMYLO_WEAPON_PROPERTY_MISFIRE_1">
		<description>
			<p>This misfires on a roll of 1 on the d20.</p>
			<div element="ID_RAVENTHEMYLO_WEAPON_PROPERTY_MISFIRE" />
		</description>
	</element>

	<element name="Misfire 2" type="Weapon Property" source="Raventhemylo" id="ID_RAVENTHEMYLO_WEAPON_PROPERTY_MISFIRE_2">
		<description>
			<p>This misfires on a roll of 2 on the d20.</p>
			<div element="ID_RAVENTHEMYLO_WEAPON_PROPERTY_MISFIRE" />
		</description>
	</element>

	<element name="Misfire 3" type="Weapon Property" source="Raventhemylo" id="ID_RAVENTHEMYLO_WEAPON_PROPERTY_MISFIRE_3">
		<description>
			<p>This misfires on a roll of 3 on the d20.</p>
			<div element="ID_RAVENTHEMYLO_WEAPON_PROPERTY_MISFIRE" />
		</description>
	</element>

	<element name="Reload 1" type="Weapon Property" source="Raventhemylo" id="ID_RAVENTHEMYLO_WEAPON_PROPERTY_RELOAD_1">
		<description>
			<p>This weapon needs to be reloaded after 1 shot.</p>
			<div element="ID_RAVENTHEMYLO_WEAPON_PROPERTY_RELOAD" />
		</description>
	</element>
	<element name="Reload 2" type="Weapon Property" source="Raventhemylo" id="ID_RAVENTHEMYLO_WEAPON_PROPERTY_RELOAD_2">
		<description>
			<p>This weapon needs to be reloaded after 2 shots.</p>
			<div element="ID_RAVENTHEMYLO_WEAPON_PROPERTY_RELOAD" />
		</description>
	</element>
	<element name="Reload 4" type="Weapon Property" source="Raventhemylo" id="ID_RAVENTHEMYLO_WEAPON_PROPERTY_RELOAD_4">
		<description>
			<p>This weapon needs to be reloaded after 4 shots.</p>
			<div element="ID_RAVENTHEMYLO_WEAPON_PROPERTY_RELOAD" />
		</description>
	</element>
	<element name="Reload 6" type="Weapon Property" source="Raventhemylo" id="ID_RAVENTHEMYLO_WEAPON_PROPERTY_RELOAD_6">
		<description>
			<p>This weapon needs to be reloaded after 6 shots.</p>
			<div element="ID_RAVENTHEMYLO_WEAPON_PROPERTY_RELOAD" />
		</description>
	</element>

	<!-- Proficiencies -->
	<append id="ID_PROFICIENCY_WEAPON_PROFICIENCY_MARTIAL_MELEE_WEAPONS">
		<rules>
			<grant type="Proficiency" id="ID_RAVENTHEMYLO_PROFICIENCY_WEAPON_PROFICIENCY_STORMCALLER" />
		</rules>
	</append>
	
	<append id="ID_WOTC_PHB_CLASS_BARBARIAN">
		<rules>
			<grant type="Proficiency" id="ID_RAVENTHEMYLO_PROFICIENCY_WEAPON_PROFICIENCY_STORMCALLER" />
		</rules>
	</append>
</elements>
